{"original_code": "        async def file_upload(file: UploadFile = File(...)):\n            filename = self.get_filename(file)\n            file_path = Path(self.file_directory) / filename\n            os.makedirs(file_path.parent, exist_ok=True)\n            try:\n                res = await file.read()\n                if self.file_max_size and len(res) > self.file_max_size:\n                    return BaseApiOut(status=-2, msg=\"The file size exceeds the limit\")\n                async with aiofiles.open(file_path, \"wb\") as f:\n                    await f.write(res)\n                return BaseApiOut(\n                    data=self.UploadOutSchema(\n                        filename=filename, url=f\"{self.static_path}/{filename}\"\n                    ),\n                )\n\n            except Exception as e:\n                return BaseApiOut(status=-1, msg=str(e))"}