{"original_code": "def test_algo():\n    \"\"\"test algorithm deps.\"\"\"\n\n    from titiler.core.algorithm import algorithms as default_algorithms\n\n    PostProcessParams = default_algorithms.dependency\n\n    app = FastAPI()\n\n    @app.get(\"/\")\n    def _endpoint(algorithm=Depends(PostProcessParams)):\n        \"\"\"return params.\"\"\"\n        if algorithm:\n            return algorithm.dict()\n        return {}\n\n    client = TestClient(app)\n    response = client.get(\"/\")\n    assert not response.json()\n\n    response = client.get(\"/?algorithm=hillshad\")\n    assert response.status_code == 422\n\n    response = client.get(\"/?algorithm=hillshade\")\n    assert response.json()[\"azimuth\"] == 90\n    assert response.json()[\"buffer\"] == 3\n    assert response.json()[\"input_nbands\"] == 1\n\n    response = client.get(\n        \"/\",\n        params={\n            \"algorithm\": \"hillshade\",\n            \"algorithm_params\": json.dumps({\"azimuth\": 30, \"buffer\": 4}),\n        },\n    )\n    assert response.json()[\"azimuth\"] == 30\n    assert response.json()[\"buffer\"] == 4\n    assert response.json()[\"input_nbands\"] == 1"}