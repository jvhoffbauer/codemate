- This function takes three arguments `websocket`, `session`, and `token`. It returns either the value of `session` cookie or `token` query parameter if both are not provided. - If neither `session` nor `token` is passed as an argument, it raises a `WebSocketException` with status code `status.WS_1008_POLICY_VIOLATION`. - The function uses Pydantic's `Annotated` decorator to validate the types of `session` and `token` parameters.