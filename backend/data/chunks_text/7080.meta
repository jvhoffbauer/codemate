{"original_code": "def test_create_user_existing_username(\n    client: TestClient, superuser_token_headers: dict, db: Session\n):\n    username = random_email()  # username = email\n    password = random_lower_string()\n    user_in = UserCreate(email=username, password=password)\n    crud.user.create(db, obj_in=user_in)\n    data = {\"email\": username, \"password\": password}\n    response = client.post(\n        f\"{settings.API_STR}{settings.API_V1_STR}/users\",\n        headers=superuser_token_headers,\n        json=data,\n    )\n    created_user = response.json()\n    assert response.status_code == 400\n    assert \"_id\" not in created_user"}