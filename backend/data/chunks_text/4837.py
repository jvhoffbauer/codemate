- Defines a function called `search_items` that takes in several arguments including a search query (`q`) and optional pagination parameters (`skip` and `limit`). It also requires an authenticated user (`current_user`) to be passed as a dependency using FastAPI's `Depends` decorator. - The function retrieves the default Elasticsearch index from the application context using `get_default_bucket()`. If the user is a superuser, it searches for documents matching the given query string using `crud.item.search()`. Otherwise, it performs a more restricted search by filtering results based on the owner of each document (using `crud.item.search_with_owner()`). Both methods take care of handling pagination automatically. - Finally, the function returns the list of found documents.