{"original_code": "def test_authenticate_user():\n    email = random_lower_string()\n    password = random_lower_string()\n    user_in = UserCreate(username=email, email=email, password=password)\n    bucket = get_default_bucket()\n    user = crud.user.upsert(bucket, user_in=user_in, persist_to=1)\n    authenticated_user = crud.user.authenticate(\n        bucket, username=user_in.username, password=password\n    )\n    assert authenticated_user\n    assert user.username == authenticated_user.username"}