- Tests the `/preview` and `/preview.<format>` endpoints for different input parameters such as URL, rescale factor, max size, return mask flag, width, height, and output format (JPEG or PNG). - Uses a mock function to simulate opening the raster file with RasterIO library. - Verifies that the returned content type is correct based on the requested format. - Parses the image metadata using the `parse_img()` helper function provided by the Flask-CORS extension. - Asserts that the expected dimensions, driver, and count of bands are obtained from the parsed metadata.