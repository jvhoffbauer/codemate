{"original_code": "def websocket_middleware(middleware_func):\n    \"\"\"\n    Helper to create a Starlette pure websocket middleware\n    \"\"\"\n\n    def middleware_constructor(app):\n        @functools.wraps(app)\n        async def wrapped_app(scope, receive, send):\n            if scope[\"type\"] != \"websocket\":\n                return await app(scope, receive, send)  # pragma: no cover\n\n            async def call_next():\n                return await app(scope, receive, send)\n\n            websocket = WebSocket(scope, receive=receive, send=send)\n            return await middleware_func(websocket, call_next)\n\n        return wrapped_app\n\n    return middleware_constructor"}