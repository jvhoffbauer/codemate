{"original_code": "def test_retrieve_users(superuser_token_headers):\n    server_api = get_server_api()\n    username = random_lower_string()\n    password = random_lower_string()\n    user_in = UserCreate(username=username, email=username, password=password)\n    bucket = get_default_bucket()\n    user = crud.user.upsert(bucket, user_in=user_in, persist_to=1)\n\n    username2 = random_lower_string()\n    password2 = random_lower_string()\n    user_in2 = UserCreate(username=username2, email=username2, password=password2)\n    user2 = crud.user.upsert(bucket, user_in=user_in, persist_to=1)\n\n    r = requests.get(\n        f\"{server_api}{config.API_V1_STR}/users/\", headers=superuser_token_headers\n    )\n    all_users = r.json()\n\n    assert len(all_users) > 1\n    for user in all_users:\n        assert \"username\" in user\n        assert \"admin_roles\" in user"}