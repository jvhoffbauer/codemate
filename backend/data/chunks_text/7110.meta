{"original_code": "def paginator(query: ModelSelect, page: int, page_size: int, order_by: str = \"id ASC\"):\n    count = query.count()\n    if page < 1:\n        page = 1\n\n    if page_size <= 0:\n        page_size = 10\n\n    if page_size >= 100:\n        page_size = 100\n\n    if page == 1:\n        offset = 0\n    else:\n        offset = (page - 1) * page_size\n\n    query = query.offset(offset).limit(page_size).order_by(SQL(order_by))\n\n    total_pages = math.ceil(count / page_size)\n\n    paginate = {\n        \"total_pages\": total_pages,\n        \"count\": count,\n        \"current_page\": page,\n        \"pre_page\": page - 1 if page > 1 else page,\n        \"next_page\": page if page == total_pages else page + 1,\n    }\n\n    return list(query.dicts()), paginate"}