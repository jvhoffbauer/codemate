{"original_code": "def upsert(\n    bucket: Bucket, *, doc_id: str, doc_in: PydanticModel, persist_to=0, ttl=0\n) -> Optional[PydanticModel]:\n    doc_data = jsonable_encoder(doc_in)\n    with bucket.durability(\n        persist_to=persist_to, timeout=config.COUCHBASE_DURABILITY_TIMEOUT_SECS\n    ):\n        result = bucket.upsert(doc_id, doc_data, ttl=ttl)\n        if result.success:\n            return doc_in\n    return None"}