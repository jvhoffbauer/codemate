{"original_code": "def update_item(\n    *,\n    id: str,\n    item_in: ItemUpdate,\n    current_user: UserInDB = Depends(get_current_active_user),\n):\n    \"\"\"\n    Update an item.\n    \"\"\"\n    bucket = get_default_bucket()\n    doc = crud.item.get(bucket=bucket, id=id)\n    if not doc:\n        raise HTTPException(status_code=404, detail=\"Item not found\")\n    if not crud.user.is_superuser(current_user) and (\n        doc.owner_username != current_user.username\n    ):\n        raise HTTPException(status_code=400, detail=\"Not enough permissions\")\n    doc = crud.item.update(\n        bucket=bucket, id=id, doc_in=item_in, owner_username=doc.owner_username\n    )\n    return doc"}