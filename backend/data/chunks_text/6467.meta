{"original_code": "    def __init__(\n        self,\n        entrypoint: \"Entrypoint\",\n        path: str,\n        *,\n        name: str = None,\n        errors: List[Type[BaseError]] = None,\n        common_dependencies: Sequence[Depends] = None,\n        response_class: Type[Response] = JSONResponse,\n        request_class: Type[JsonRpcRequest] = JsonRpcRequest,\n        **kwargs,\n    ):\n        name = name or \"entrypoint\"\n\n        _, path_format, _ = compile_path(path)\n\n        _Request = request_class\n\n        common_dependant = Dependant(path=path_format)\n        if common_dependencies:\n            insert_dependencies(common_dependant, common_dependencies)\n            fix_query_dependencies(common_dependant)\n            common_dependant = get_flat_dependant(common_dependant, skip_repeats=True)\n\n            if common_dependant.body_params:\n                _Request = make_request_model(\n                    name, entrypoint.callee_module, common_dependant.body_params\n                )\n\n        # This is only necessary for generating OpenAPI\n        def endpoint(__request__: _Request):\n            del __request__\n\n        responses = errors_responses(errors)\n\n        super().__init__(\n            path,\n            endpoint,\n            methods=[\"POST\"],\n            name=name,\n            response_class=response_class,\n            response_model=JsonRpcResponse,\n            responses=responses,\n            **kwargs,\n        )\n\n        flat_dependant = get_flat_dependant(self.dependant, skip_repeats=True)\n\n        if len(flat_dependant.body_params) > 1:\n            body_params = [\n                p for p in flat_dependant.body_params if p.type_ is not _Request\n            ]\n            raise RuntimeError(\n                f\"Entrypoint shared dependencies can't use 'Body' parameters: \"\n                f\"params={body_params}\"\n            )\n\n        if flat_dependant.query_params:\n            raise RuntimeError(\n                f\"Entrypoint shared dependencies can't use 'Query' parameters: \"\n                f\"params={flat_dependant.query_params}\"\n            )\n\n        self.shared_dependant = clone_dependant(self.dependant)\n\n        # No shared 'Body' params, because each JSON-RPC request in batch has own body\n        self.shared_dependant.body_params = []\n\n        # Add dependencies and other parameters from common_dependant for correct OpenAPI generation\n        self.dependant.path_params.extend(common_dependant.path_params)\n        self.dependant.header_params.extend(common_dependant.header_params)\n        self.dependant.cookie_params.extend(common_dependant.cookie_params)\n        self.dependant.dependencies.extend(common_dependant.dependencies)\n        self.dependant.security_requirements.extend(\n            common_dependant.security_requirements\n        )\n\n        self.app = request_response(self.handle_http_request)\n        self.entrypoint = entrypoint\n        self.common_dependencies = common_dependencies\n        self.request_class = request_class\n        self.errors = errors or []"}