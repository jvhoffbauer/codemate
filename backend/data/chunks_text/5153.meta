{"original_code": "    def url_for(self, request: Request, name: str, **path_params: Any) -> str:\n        \"\"\"Return full url (with prefix) for a specific endpoint.\"\"\"\n        url_path = self.router.url_path_for(name, **path_params)\n        base_url = str(request.base_url)\n        if self.router_prefix:\n            prefix = self.router_prefix.lstrip(\"/\")\n            # If we have prefix with custom path param we check and replace them with\n            # the path params provided\n            if \"{\" in prefix:\n                _, path_format, param_convertors = compile_path(prefix)\n                prefix, _ = replace_params(\n                    path_format, param_convertors, request.path_params\n                )\n            base_url += prefix\n\n        url = url_path.make_absolute_url(base_url=base_url)\n        return url"}