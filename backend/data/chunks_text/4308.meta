{"original_code": "def test_middleware():\n    client = TestClient(app, base_url=\"http://example.com\")\n    response = client.get(\"/\")\n    assert response.status_code == 200, response.text\n    client = TestClient(app, base_url=\"http://subdomain.example.com\")\n    response = client.get(\"/\")\n    assert response.status_code == 200, response.text\n    client = TestClient(app, base_url=\"http://invalidhost\")\n    response = client.get(\"/\")\n    assert response.status_code == 400, response.text"}