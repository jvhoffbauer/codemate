{"original_code": "def register_hook(app: FastAPI) -> None:\n    \"\"\"\n    \u8bf7\u6c42\u54cd\u5e94\u62e6\u622a hook\n    https://fastapi.tiangolo.com/tutorial/middleware/\n    :param app:\n    :return:\n    \"\"\"\n\n    @app.middleware(\"http\")\n    async def logger_request(request: Request, call_next) -> Response:\n        # https://stackoverflow.com/questions/60098005/fastapi-starlette-get-client-real-ip\n        # logger.info(f\"\u8bbf\u95ee\u8bb0\u5f55:{request.method} url:{request.url}\\nheaders:{request.headers}\\nIP:{request.client.host}\")\n        response = await call_next(request)\n        return response"}