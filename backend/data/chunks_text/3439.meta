{"original_code": "def test_custom_middleware_exception(tmp_path: Path):\n    default_pydantic_max_size = 2**16\n    path = tmp_path / \"test.txt\"\n    path.write_bytes(b\"x\" * (default_pydantic_max_size + 1))\n\n    with client:\n        with open(path, \"rb\") as file:\n            response = client.post(\"/middleware\", files={\"file\": file})\n        assert response.status_code == 422, response.text\n        assert response.json() == {\n            \"detail\": {\n                \"name\": \"ContentSizeLimitExceeded\",\n                \"code\": 999,\n                \"message\": \"File limit exceeded\",\n            }\n        }"}