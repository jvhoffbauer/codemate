{"original_code": "@router.put(\"/{id}\")\ndef update_item(\n    *, session: SessionDep, current_user: CurrentUser, id: int, item_in: ItemUpdate\n) -> ItemOut:\n    \"\"\"\n    Update an item.\n    \"\"\"\n    item = session.get(Item, id)\n    if not item:\n        raise HTTPException(status_code=404, detail=\"Item not found\")\n    if not current_user.is_superuser and (item.owner_id != current_user.id):\n        raise HTTPException(status_code=400, detail=\"Not enough permissions\")\n    # TODO: check this actually works\n    update_dict = item_in.dict(exclude_unset=True)\n    item.from_orm(update_dict)\n    session.add(item)\n    session.commit()\n    session.refresh(item)\n    return item  # type: ignore"}