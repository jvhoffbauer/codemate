{"original_code": "def update_hero(hero_id: int, hero: HeroUpdate):\n    with Session(engine) as session:\n        db_hero = session.get(Hero, hero_id)\n        if not db_hero:\n            raise HTTPException(status_code=404, detail=\"Hero not found\")\n        hero_data = hero.model_dump(exclude_unset=True)\n        for key, value in hero_data.items():\n            setattr(db_hero, key, value)\n        session.add(db_hero)\n        session.commit()\n        session.refresh(db_hero)\n        return db_hero"}