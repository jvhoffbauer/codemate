{"original_code": "def test_route_update(client: TestClient, fake_users, models):\n    # update one\n    res = client.put(\"/User/item/1\", json={\"username\": \"new_name\"})\n    count = res.json()[\"data\"]\n    assert count == 1\n    user = db.session.get(models.User, 1)\n    assert user.username == \"new_name\"\n    # update bulk\n    res = client.put(\"/User/item/1,2,4\", json={\"password\": \"new_password\"})\n    count = res.json()[\"data\"]\n    assert count == 3\n    db.session.expire_all()  # Make the instance expire, because when creating the user,\n    # the user object attributes have been cached, so you need to expire.\n    for user in db.session.scalars(\n        select(models.User).where(models.User.id.in_([1, 2, 4]))\n    ):\n        assert user.password == \"new_password\""}