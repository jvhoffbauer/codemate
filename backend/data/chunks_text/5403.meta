{"original_code": "def test_TMSFactory():\n    \"\"\"test TMSFactory.\"\"\"\n\n    tms_endpoints = TMSFactory(router_prefix=\"tms\")\n    assert len(tms_endpoints.router.routes) == 2\n\n    app = FastAPI()\n    app.include_router(tms_endpoints.router, prefix=\"/tms\")\n\n    client = TestClient(app)\n\n    response = client.get(\"/tms/tileMatrixSets\")\n    assert response.status_code == 200\n    body = response.json()\n    assert len(body[\"tileMatrixSets\"]) == NB_DEFAULT_TMS\n    tms = list(filter(lambda m: m[\"id\"] == \"WebMercatorQuad\", body[\"tileMatrixSets\"]))[\n        0\n    ]\n    assert (\n        tms[\"links\"][0][\"href\"]\n        == \"http://testserver/tms/tileMatrixSets/WebMercatorQuad\"\n    )\n\n    response = client.get(\"/tms/tileMatrixSets/WebMercatorQuad\")\n    assert response.status_code == 200\n    body = response.json()\n    assert body[\"type\"] == \"TileMatrixSetType\"\n    assert body[\"identifier\"] == \"WebMercatorQuad\"\n\n    response = client.get(\"/tms/tileMatrixSets/WebMercatorQua\")\n    assert response.status_code == 422\n\n    app = FastAPI()\n    tms_endpoints = TMSFactory(supported_tms=WEB_TMS)\n    app.include_router(\n        tms_endpoints.router,\n    )\n\n    client = TestClient(app)\n\n    response = client.get(\"/tileMatrixSets\")\n    assert response.status_code == 200\n    body = response.json()\n    assert len(body[\"tileMatrixSets\"]) == 1\n\n    response = client.get(\"/tileMatrixSets/WebMercatorQuad\")\n    assert response.status_code == 200\n\n    response = client.get(\"/tileMatrixSets/LINZAntarticaMapTilegrid\")\n    assert response.status_code == 422"}