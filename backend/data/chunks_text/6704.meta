{"original_code": "def test_batch(ep, json_request):\n    resp = json_request(\n        [\n            {\n                \"id\": 111,\n                \"jsonrpc\": \"2.0\",\n                \"method\": \"probe\",\n                \"params\": {\"data\": \"one\"},\n            },\n            {\n                \"id\": 222,\n                \"jsonrpc\": \"2.0\",\n                \"method\": \"probe\",\n                \"params\": {\"data\": \"two\"},\n            },\n        ]\n    )\n    assert resp == [\n        {\"id\": 111, \"jsonrpc\": \"2.0\", \"result\": \"one\"},\n        {\"id\": 222, \"jsonrpc\": \"2.0\", \"result\": \"two\"},\n    ]\n    assert ep.calls == {\n        111: [\n            (\n                \"ep_middleware\",\n                \"enter\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"enter\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"exit\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                {\"id\": 111, \"jsonrpc\": \"2.0\", \"result\": \"one\"},\n                None,\n            ),\n            (\n                \"ep_middleware\",\n                \"exit\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                {\"id\": 111, \"jsonrpc\": \"2.0\", \"result\": \"one\"},\n                None,\n            ),\n        ],\n        222: [\n            (\n                \"ep_middleware\",\n                \"enter\",\n                {\n                    \"id\": 222,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"two\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"enter\",\n                {\n                    \"id\": 222,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"two\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"exit\",\n                {\n                    \"id\": 222,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"two\"},\n                },\n                {\"id\": 222, \"jsonrpc\": \"2.0\", \"result\": \"two\"},\n                None,\n            ),\n            (\n                \"ep_middleware\",\n                \"exit\",\n                {\n                    \"id\": 222,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe\",\n                    \"params\": {\"data\": \"two\"},\n                },\n                {\"id\": 222, \"jsonrpc\": \"2.0\", \"result\": \"two\"},\n                None,\n            ),\n        ],\n    }"}