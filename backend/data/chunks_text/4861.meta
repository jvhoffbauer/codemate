{"original_code": "def update_user(\n    *,\n    username: str,\n    user_in: UserUpdate,\n    current_user: UserInDB = Depends(get_current_active_superuser),\n):\n    \"\"\"\n    Update a user.\n    \"\"\"\n    bucket = get_default_bucket()\n    user = crud.user.get(bucket, username=username)\n\n    if not user:\n        raise HTTPException(\n            status_code=404,\n            detail=\"The user with this username does not exist in the system\",\n        )\n    user = crud.user.update(bucket, username=username, user_in=user_in)\n    return user"}