{"original_code": "def get_by_email(bucket: Bucket, *, email: str):\n    query_str = f\"SELECT *, META().id as doc_id FROM {config.COUCHBASE_BUCKET_NAME} WHERE type = $type AND email = $email;\"\n    q = N1QLQuery(\n        query_str,\n        bucket=config.COUCHBASE_BUCKET_NAME,\n        type=USERPROFILE_DOC_TYPE,\n        email=email,\n    )\n    q.consistency = CONSISTENCY_REQUEST\n    doc_results = bucket.n1ql_query(q)\n    users = utils.doc_results_to_model(doc_results, doc_model=UserInDB)\n    if not users:\n        return None\n    return users[0]"}