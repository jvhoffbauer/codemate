{"original_code": "def test_cors():\n    client = TestClient(app)\n    # Test pre-flight response\n    headers = {\n        \"Origin\": \"https://localhost.tiangolo.com\",\n        \"Access-Control-Request-Method\": \"GET\",\n        \"Access-Control-Request-Headers\": \"X-Example\",\n    }\n    response = client.options(\"/\", headers=headers)\n    assert response.status_code == 200, response.text\n    assert response.text == \"OK\"\n    assert (\n        response.headers[\"access-control-allow-origin\"]\n        == \"https://localhost.tiangolo.com\"\n    )\n    assert response.headers[\"access-control-allow-headers\"] == \"X-Example\"\n\n    # Test standard response\n    headers = {\"Origin\": \"https://localhost.tiangolo.com\"}\n    response = client.get(\"/\", headers=headers)\n    assert response.status_code == 200, response.text\n    assert response.json() == {\"message\": \"Hello World\"}\n    assert (\n        response.headers[\"access-control-allow-origin\"]\n        == \"https://localhost.tiangolo.com\"\n    )\n\n    # Test non-CORS response\n    response = client.get(\"/\")\n    assert response.status_code == 200, response.text\n    assert response.json() == {\"message\": \"Hello World\"}\n    assert \"access-control-allow-origin\" not in response.headers"}