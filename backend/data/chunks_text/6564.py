- Defines a function `ep` that takes an endpoint path as input and returns an instance of `jsonrpc.Entrypoint`.
- Initializes two counter variables with default values (`_shared_counter` and `_common_counter`) outside any functions or classes to ensure they are accessible by all inner functions.
- Defines two coroutines `get_shared_counter` and `get_common_counter`, which increment their respective counters using nonlocal statements and return a string concatenating the corresponding header/body value and its current count. These coroutines are passed as dependency factories for the entrypoint's methods.
- Creates the actual entrypoint object using `jsonrpc.Entrypoint`, passing it the endpoint path, a list containing one dependency factory (for the "shared" parameter), and another list containing another dependency factory (for the "common" parameter). This allows us to specify different sets of required parameters for each method in the entrypoint.
- Defines a single method called `probe` inside the entrypoint class, taking both the "shared" and "common" parameters as dependencies using the `Depends` decorator from FastAPI. The returned tuple contains both counters as strings.