{"original_code": "def test_should_raise_exception_when_try_to_duplicate_row_if_unique_constraint_is_true(\n    clear_sqlmodel,\n):\n    class Hero(SQLModel, table=True):\n        id: Optional[int] = Field(default=None, primary_key=True)\n        name: str\n        secret_name: str = Field(unique=True)\n        age: Optional[int] = None\n\n    hero_1 = Hero(name=\"Deadpond\", secret_name=\"Dive Wilson\")\n    hero_2 = Hero(name=\"Deadpond\", secret_name=\"Dive Wilson\")\n\n    engine = create_engine(\"sqlite://\")\n\n    SQLModel.metadata.create_all(engine)\n\n    with Session(engine) as session:\n        session.add(hero_1)\n        session.commit()\n        session.refresh(hero_1)\n\n    with pytest.raises(IntegrityError):\n        with Session(engine) as session:\n            session.add(hero_2)\n            session.commit()"}