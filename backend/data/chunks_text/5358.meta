{"original_code": "def test_algo():\n    \"\"\"test algorithm deps.\"\"\"\n    # Add the `Multiply` algorithm to the default ones\n    algorithms = default_algorithms.register({\"multiply\": Multiply})\n\n    app = FastAPI()\n\n    arr = numpy.random.randint(0, 3000, (3, 256, 256))\n\n    @app.get(\"/\")\n    def main(algorithm=Depends(algorithms.dependency)):\n        \"\"\"endpoint.\"\"\"\n        img = ImageData(arr)\n        if algorithm:\n            return algorithm(img).data.max().tolist()\n\n        return img.data.max().tolist()\n\n    client = TestClient(app)\n    response = client.get(\"/\")\n    assert response.json() == arr.max().tolist()\n\n    # Missing factor input\n    response = client.get(\"/\", params={\"algorithm\": \"multiply\"})\n    assert response.status_code == 400\n\n    response = client.get(\n        \"/\",\n        params={\"algorithm\": \"multiply\", \"algorithm_params\": json.dumps({\"factor\": 3})},\n    )\n    assert response.json() == arr.max().tolist() * 3"}