{"original_code": "def test_upload_file_is_closed(tmp_path: Path):\n    path = tmp_path / \"test.txt\"\n    path.write_bytes(b\"<file content>\")\n    app = FastAPI()\n\n    testing_file_store: List[UploadFile] = []\n\n    @app.post(\"/uploadfile/\")\n    def create_upload_file(file: UploadFile):\n        testing_file_store.append(file)\n        return {\"filename\": file.filename}\n\n    client = TestClient(app)\n    with path.open(\"rb\") as file:\n        response = client.post(\"/uploadfile/\", files={\"file\": file})\n    assert response.status_code == 200, response.text\n    assert response.json() == {\"filename\": \"test.txt\"}\n\n    assert testing_file_store\n    assert testing_file_store[0].file.closed"}