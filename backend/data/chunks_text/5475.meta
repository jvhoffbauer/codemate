{"original_code": "def test_wmts(rio, app):\n    \"\"\"test wmts endpoints.\"\"\"\n    rio.open = mock_rasterio_open\n\n    response = app.get(\"/cog/WMTSCapabilities.xml?url=https://myurl.com/cog.tif\")\n    assert response.status_code == 200\n    assert response.headers[\"content-type\"] == \"application/xml\"\n    assert response.headers[\"Cache-Control\"] == \"private, max-age=3600\"\n    assert (\n        \"http://testserver/cog/WMTSCapabilities.xml?url=https://myurl.com/cog.tif\"\n        in response.content.decode()\n    )\n    assert \"<ows:Identifier>cogeo</ows:Identifier>\" in response.content.decode()\n    assert (\n        \"http://testserver/cog/tiles/WebMercatorQuad/{TileMatrix}/{TileCol}/{TileRow}@1x.png?url=https\"\n        in response.content.decode()\n    )\n\n    response = app.get(\n        \"/cog/WMTSCapabilities.xml?url=https://myurl.com/cog.tif&tile_scale=2&tile_format=jpg\"\n    )\n    assert response.status_code == 200\n    assert response.headers[\"content-type\"] == \"application/xml\"\n    assert (\n        \"http://testserver/cog/tiles/WebMercatorQuad/{TileMatrix}/{TileCol}/{TileRow}@2x.jpg?url=https\"\n        in response.content.decode()\n    )"}