{"original_code": "@pytest.fixture\ndef openapi_compatible():\n    supported_openapi_versions = [\n        packaging.version.parse(\"3.0.2\"),\n        packaging.version.parse(\"3.1.0\"),\n    ]\n\n    if packaging.version.parse(pydantic.VERSION) >= packaging.version.parse(\"1.10.0\"):\n\n        def _openapi_compatible(value: dict):\n            assert (\n                packaging.version.parse(value[\"openapi\"]) in supported_openapi_versions\n            )\n            value[\"openapi\"] = ANY\n            return value\n\n    else:\n\n        def _openapi_compatible(obj: dict):\n            for k, v in obj.items():\n                if isinstance(v, dict):\n                    obj[k] = _openapi_compatible(obj[k])\n            if \"const\" in obj and \"default\" in obj:\n                del obj[\"default\"]\n\n            assert packaging.version.parse(obj[\"openapi\"]) in supported_openapi_versions\n            obj[\"openapi\"] = ANY\n\n            return obj\n\n    return _openapi_compatible"}