{"original_code": "def get_index(\n    index_name: str,\n    *,\n    username: str = COUCHBASE_USER,\n    password: str = COUCHBASE_PASSWORD,\n    host=\"couchbase\",\n    port=\"8094\",\n):\n    full_text_url = f\"http://{host}:{port}\"\n    index_url = f\"{full_text_url}/api/index/{index_name}\"\n    auth = HTTPBasicAuth(username, password)\n    response = requests.get(index_url, auth=auth)\n    if response.status_code == 400:\n        content = response.json()\n        error = content.get(\"error\")\n        if error == \"rest_auth: preparePerms, err: index not found\":\n            return None\n        raise ValueError(error)\n    elif response.status_code == 200:\n        content = response.json()\n        assert (\n            content.get(\"status\") == \"ok\"\n        ), \"Expected a status OK communicating with Full Text Search\"\n        index_def = content.get(\"indexDef\")\n        return index_def\n    raise ValueError(response.text)"}