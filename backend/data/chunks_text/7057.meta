{"original_code": "def create_access_token(\n    subject: str, expires_delta: timedelta | None = None, **kwargs\n) -> str:\n    if not isinstance(subject, str):\n        raise ValueError(\"Subject must be a string\")\n    now = datetime.utcnow()\n    if expires_delta:\n        expire = now + expires_delta\n    else:\n        expire = now + timedelta(minutes=settings.ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode = {\n        **kwargs,\n        \"exp\": expire.timestamp(),\n        \"sub\": subject,\n        \"nbf\": now,\n        \"iat\": now,\n    }\n    encoded_jwt = jwt.encode(\n        to_encode, settings.SECRET_KEY, algorithm=settings.TOKEN_SIGNATURE_ALGORITHM\n    )\n    return encoded_jwt"}