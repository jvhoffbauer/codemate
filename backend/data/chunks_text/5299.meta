{"original_code": "def test_timing_middleware_exclude():\n    \"\"\"Create App.\"\"\"\n    app = FastAPI()\n\n    @app.get(\"/route1\")\n    async def route1():\n        \"\"\"route1.\"\"\"\n        return \"I am tired\"\n\n    @app.get(\"/route2\")\n    async def route2():\n        \"\"\"route2.\"\"\"\n        time.sleep(1)\n        return \"I slept fine\"\n\n    @app.get(\"/route3\")\n    async def route3(response: Response):\n        \"\"\"route3.\"\"\"\n        time.sleep(1)\n        response.headers[\"Server-Timing\"] = \"atime;dur=2000\"\n        return \"I slept fine\"\n\n    app.add_middleware(TotalTimeMiddleware)\n\n    with TestClient(app) as client:\n        response = client.get(\"/route1\")\n        tim = response.headers.get(\"Server-Timing\")\n        assert \"total;dur=\" in tim\n\n        response = client.get(\"/route2\")\n        tim = response.headers.get(\"Server-Timing\")\n        assert \"total;dur=\" in tim\n        assert float(tim.split(\"=\")[1]) > 1000\n\n        response = client.get(\"/route3\")\n        tim = response.headers.get(\"Server-Timing\")\n        assert \"atime;dur=2000, total\" in tim"}