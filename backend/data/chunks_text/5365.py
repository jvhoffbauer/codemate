- Creates a FastAPI application and adds LoggerMiddleware to it, excluding query strings and headers from logging by default. - Makes requests to the "/route1" endpoint with different parameters and checks that the correct number of log messages are generated based on whether or not the excluded data is present. - Verifies that the header value passed in the request is included in the log message when it's present.