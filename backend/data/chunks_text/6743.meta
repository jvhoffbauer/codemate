{"original_code": "def test_component_schemas(ep, app, app_client):\n    class Input(BaseModel):\n        x: int = Field(\n            ...,\n            title=\"x\",\n            description=\"X field\",\n            gt=1,\n            lt=10,\n            multiple_of=3,\n        )\n        y: Optional[str] = Field(\n            None,\n            alias=\"Y\",\n            min_length=1,\n            max_length=5,\n            pattern=r\"^[a-z]{4}$\",\n        )\n\n        class Config:\n            extra = Extra.forbid\n\n    class Output(BaseModel):\n        result: List[int] = Field(\n            ...,\n            min_items=1,\n            max_items=10,\n        )\n\n    @ep.method()\n    def my_method(inp: Input) -> Output:\n        return Output(result=[inp.x])\n\n    app.bind_entrypoint(ep)\n\n    resp = app_client.get(\"/openrpc.json\")\n    schema = resp.json()\n\n    assert len(schema[\"methods\"]) == 1\n    assert schema[\"methods\"][0][\"params\"] == [\n        {\n            \"name\": \"inp\",\n            \"schema\": {\"$ref\": \"#/components/schemas/Input\"},\n            \"required\": True,\n        }\n    ]\n    assert schema[\"methods\"][0][\"result\"] == {\n        \"name\": \"my_method_Result\",\n        \"schema\": {\"$ref\": \"#/components/schemas/Output\"},\n    }\n\n    assert schema[\"components\"][\"schemas\"] == {\n        \"Input\": {\n            \"title\": \"Input\",\n            \"type\": \"object\",\n            \"properties\": {\n                \"x\": {\n                    \"title\": \"x\",\n                    \"description\": \"X field\",\n                    \"exclusiveMinimum\": 1,\n                    \"exclusiveMaximum\": 10,\n                    \"multipleOf\": 3,\n                    \"type\": \"integer\",\n                },\n                \"Y\": {\n                    \"anyOf\": [\n                        {\n                            \"maxLength\": 5,\n                            \"minLength\": 1,\n                            \"pattern\": \"^[a-z]{4}$\",\n                            \"type\": \"string\",\n                        },\n                        {\"type\": \"null\"},\n                    ],\n                    \"default\": None,\n                    \"title\": \"Y\",\n                },\n            },\n            \"required\": [\"x\"],\n            \"additionalProperties\": False,\n        },\n        \"Output\": {\n            \"title\": \"Output\",\n            \"type\": \"object\",\n            \"properties\": {\n                \"result\": {\n                    \"title\": \"Result\",\n                    \"minItems\": 1,\n                    \"maxItems\": 10,\n                    \"type\": \"array\",\n                    \"items\": {\"type\": \"integer\"},\n                }\n            },\n            \"required\": [\"result\"],\n        },\n    }"}