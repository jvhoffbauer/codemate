- This function is called `reset_password`, and it takes two arguments `token` and `new_password`. The `token` argument is optional (indicated by the default value of `Body(...)`) and represents a password reset token generated earlier. The `new_password` argument also has an optional default value of `Body(...)`.
- The function verifies the validity of the password reset token using the `verify_password_reset_token` method. If the verification fails, a `HTTPException` with status code 400 ("Bad Request") and error message "Invalid token" is raised.
- After successful token validation, the function retrieves the associated user from the database using the `crud.user.get` method. If the user doesn't exist or is inactive, another `HTTPException` is thrown with appropriate error messages.
- Finally, the function updates the user's password using the `UserUpdate` class provided by FastAPI's ORM library SQLAlchemy. The updated object is then saved to the database using the `crud.user.update` method. A success message is returned as JSON response.