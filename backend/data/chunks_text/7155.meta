{"original_code": "def upload_image(\n    file: UploadFile = File(...),\n):\n    # \u672c\u5730\u5b58\u50a8\u4e34\u65f6\u65b9\u6848\uff0c\u4e00\u822c\u751f\u4ea7\u90fd\u662f\u4f7f\u7528\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8OSS(\u5982\u4e03\u725b\u4e91, \u963f\u91cc\u4e91)\n    # \u5efa\u8bae\u8ba1\u7b97\u5e76\u8bb0\u5f55\u4e00\u6b21 \u6587\u4ef6md5\u503c \u907f\u514d\u91cd\u590d\u5b58\u50a8\u76f8\u540c\u8d44\u6e90\n    save_dir = f\"{settings.BASE_PATH}/static/img\"\n\n    if not os.path.exists(save_dir):\n        os.mkdir(save_dir)\n    try:\n        suffix = Path(file.filename).suffix\n\n        with NamedTemporaryFile(delete=False, suffix=suffix, dir=save_dir) as tmp:\n            shutil.copyfileobj(file.file, tmp)\n            tmp_file_name = Path(tmp.name).name\n    finally:\n        file.file.close()\n\n    return resp.ok(data={\"image\": f\"/static/img/{tmp_file_name}\"})"}