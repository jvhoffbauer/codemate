{"original_code": "def test_single_error(ep, method_request, assert_log_errors):\n    resp = method_request(\"probe_error\", {\"data\": \"one\"}, request_id=111)\n    assert resp == {\n        \"id\": 111,\n        \"jsonrpc\": \"2.0\",\n        \"error\": {\n            \"code\": 33333,\n            \"data\": unique_marker2,\n            \"message\": \"Test error\",\n        },\n    }\n    assert ep.calls == {\n        111: [\n            (\n                \"ep_middleware\",\n                \"enter\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe_error\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"enter\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe_error\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                None,\n                None,\n            ),\n            (\n                \"method_middleware\",\n                \"exit\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe_error\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"error\": {\"code\": -32603, \"message\": \"Internal error\"},\n                },\n                RuntimeError,\n            ),\n            (\n                \"ep_middleware\",\n                \"exit\",\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"method\": \"probe_error\",\n                    \"params\": {\"data\": \"one\"},\n                },\n                {\n                    \"id\": 111,\n                    \"jsonrpc\": \"2.0\",\n                    \"error\": {\"code\": -32603, \"message\": \"Internal error\"},\n                },\n                RuntimeError,\n            ),\n        ]\n    }\n\n    assert_log_errors(unique_marker, pytest.raises(RuntimeError))"}