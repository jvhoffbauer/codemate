{"original_code": "async def extract_entities_by_type(\n    body: RecordsRequest = Body(..., example=example_request)\n):\n    \"\"\"Extract Named Entities from a batch of Records separated by entity label.\n    This route can be used directly as a Cognitive Skill in Azure Search\n    For Documentation on integration with Azure Search, see here:\n    https://docs.microsoft.com/en-us/azure/search/cognitive-search-custom-skill-interface\n    \"\"\"\n\n    res = []\n    documents = []\n\n    for val in body.values:\n        documents.append({\"id\": val.recordId, \"text\": val.data.text})\n\n    entities_res = extractor.extract_entities(documents)\n    res = []\n\n    for er in entities_res:\n        groupby = defaultdict(list)\n        for ent in er[\"entities\"]:\n            ent_prop = ENT_PROP_MAP[ent[\"label\"]]\n            groupby[ent_prop].append(ent[\"name\"])\n        record = {\"recordId\": er[\"id\"], \"data\": groupby}\n        res.append(record)\n\n    return {\"values\": res}"}