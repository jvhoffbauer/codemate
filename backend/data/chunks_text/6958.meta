{"original_code": "async def login(\n    data: OAuth2PasswordRequestForm = Depends(),\n    session: AsyncSession = Depends(get_session),\n):\n    user = await authenticate(session, email=data.username, password=data.password)\n    if user is None:\n        raise HTTPException(status_code=400, detail=\"Incorrect email or password\")\n    if not user.is_active:\n        raise HTTPException(status_code=400, detail=\"Inactive user\")\n    return {\"access_token\": create_access_token(user), \"token_type\": \"bearer\"}"}