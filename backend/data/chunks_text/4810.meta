{"original_code": "def update(\n    bucket: Bucket,\n    *,\n    doc_id: str,\n    doc: PydanticModel,\n    doc_updated: PydanticModel,\n    persist_to=0,\n    ttl=0,\n):\n    doc_updated = doc.copy(update=doc_updated.dict(skip_defaults=True))\n    data = jsonable_encoder(doc_updated)\n    with bucket.durability(\n        persist_to=persist_to, timeout=config.COUCHBASE_DURABILITY_TIMEOUT_SECS\n    ):\n        result = bucket.upsert(doc_id, data, ttl=ttl)\n        if result.success:\n            return doc_updated"}