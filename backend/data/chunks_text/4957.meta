{"original_code": "def setup_middleware(app: FastAPI):\n    async def add_process_time_header(request: Request, call_next):\n        start_time = time.time()\n        response = await call_next(request)\n        process_time = time.time() - start_time\n        response.headers[\"X-Process-Time\"] = str(process_time)\n        return response\n\n    app.add_middleware(BaseHTTPMiddleware, dispatch=add_process_time_header)"}