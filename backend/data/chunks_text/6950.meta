{"original_code": "async def create_user(\n    user_in: UserCreate, session: AsyncSession = Depends(get_session)\n):\n    \"\"\"\n    Create new user.\n    \"\"\"\n    user = await crud_user.get(session, email=user_in.email)\n    if user is not None:\n        raise HTTPException(\n            status_code=409,\n            detail=\"The user with this username already exists in the system\",\n        )\n    obj_in = UserInDB(\n        **user_in.dict(), hashed_password=get_password_hash(user_in.password)\n    )\n    return await crud_user.create(session, obj_in)"}