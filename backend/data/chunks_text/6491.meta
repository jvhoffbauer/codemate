{"original_code": "        def update_refs(value):\n            if not isinstance(value, (dict, list)):\n                return\n\n            if isinstance(value, list):\n                for v in value:\n                    update_refs(v)\n                return\n\n            if \"$ref\" not in value:\n                for v in value.values():\n                    update_refs(v)\n                return\n\n            ref = value[\"$ref\"]\n            if ref.startswith(REF_PREFIX):\n                *_, schema = ref.split(REF_PREFIX)\n                new_schema = old2new_schema_name.get(schema, schema)\n                if new_schema != schema:\n                    ref = f\"{REF_PREFIX}{new_schema}\"\n                    value[\"$ref\"] = ref"}