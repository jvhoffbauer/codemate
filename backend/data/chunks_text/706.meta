{"original_code": "async def test_websocket_request(caplog, app):\n    \"\"\"\n    We expect websocket requests to not be handled.\n    This test could use improvement.\n    \"\"\"\n\n    @app.websocket_route(\"/ws\")\n    async def websocket(websocket: \"WebSocket\"):\n        # Check we get the right headers back\n        assert websocket.headers.get(\"x-request-id\") is not None\n\n        await websocket.accept()\n        await websocket.send_json({\"msg\": \"Hello WebSocket\"})\n        await websocket.close()\n\n    client = TestClient(app)\n    with client.websocket_connect(\"/ws\") as ws:\n        ws.receive_json()\n        assert caplog.messages == []"}