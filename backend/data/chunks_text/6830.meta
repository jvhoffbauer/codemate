{"original_code": "def reset_password(\n    token: str = Body(...),\n    new_password: str = Body(...),\n    db: Session = Depends(deps.get_db),\n) -> Any:\n    \"\"\"\n    Reset password\n    \"\"\"\n    email = verify_password_reset_token(token)\n    if not email:\n        raise HTTPException(status_code=400, detail=\"Invalid token\")\n    user = crud.user.get_by_email(db, email=email)\n    if not user:\n        raise HTTPException(\n            status_code=404,\n            detail=\"The user with this username does not exist in the system.\",\n        )\n    elif not crud.user.is_active(user):\n        raise HTTPException(status_code=400, detail=\"Inactive user\")\n    hashed_password = get_password_hash(new_password)\n    user.hashed_password = hashed_password\n    db.add(user)\n    db.commit()\n    return {\"msg\": \"Password updated successfully\"}"}