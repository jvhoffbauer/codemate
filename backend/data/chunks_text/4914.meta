{"original_code": "def test_create_user():\n    email = random_lower_string()\n    password = random_lower_string()\n    user_in = UserCreate(username=email, email=email, password=password)\n    bucket = get_default_bucket()\n    user = crud.user.upsert(bucket, user_in=user_in, persist_to=1)\n    assert hasattr(user, \"username\")\n    assert user.username == email\n    assert hasattr(user, \"hashed_password\")\n    assert hasattr(user, \"type\")\n    assert user.type == \"userprofile\""}