{"original_code": "    async def ep_middleware(ctx: jsonrpc.JsonRpcContext):\n        nonlocal _calls\n        ep_middleware_var.set(\"ep_middleware-value\")\n        _calls[ctx.raw_request.get(\"id\")].append(\n            (\n                \"ep_middleware\",\n                \"enter\",\n                ctx.raw_request,\n                ctx.raw_response,\n                sys.exc_info()[0],\n            )\n        )\n        try:\n            yield\n        finally:\n            _calls[ctx.raw_response.get(\"id\")].append(\n                (\n                    \"ep_middleware\",\n                    \"exit\",\n                    ctx.raw_request,\n                    ctx.raw_response,\n                    sys.exc_info()[0],\n                )\n            )"}