{"original_code": "    async def get_page_schema_children(self, request: Request) -> List[PageSchema]:\n        page_schema_list = []\n        for child in self._children:\n            if not child.page_schema:\n                continue\n            if (isinstance(child, AdminGroup) and not isinstance(child, AdminApp)) or (\n                isinstance(child, AdminApp) and child.page_schema.tabsMode is None\n            ):\n                sub_children = await child.get_page_schema_children(request)\n                if (\n                    sub_children\n                ):  # If there are sub-nodes, show them even if the parent node has no permission.\n                    page_schema = child.page_schema.copy(deep=True)\n                    page_schema.children = sub_children\n                    page_schema_list.append(page_schema)\n            elif await child.has_page_permission(request, action=\"page\"):\n                page_schema_list.append(child.page_schema)\n        if page_schema_list:\n            page_schema_list.sort(key=lambda p: p.sort or 0, reverse=True)\n        return page_schema_list"}